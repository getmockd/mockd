# Test runner image: Alpine with curl, jq, and bash for E2E test scripts
FROM alpine:3.20

RUN apk add --no-cache \
    bash \
    curl \
    jq \
    coreutils \
    mosquitto-clients \
    grpcurl

# Create results directory
RUN mkdir -p /results

COPY scripts/ /tests/
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh /tests/*.sh 2>/dev/null || true

ENTRYPOINT ["/entrypoint.sh"]
