syntax = "proto3";

package stocks;

option go_package = "github.com/getmockd/mockd/examples/stocks";

service StockService {
  // Get a single stock quote
  rpc GetQuote(QuoteRequest) returns (Quote);
  
  // Stream real-time quotes for a symbol
  rpc StreamQuotes(StreamQuotesRequest) returns (stream Quote);
  
  // Bidirectional streaming for trading
  rpc Trade(stream TradeRequest) returns (stream TradeResponse);
}

message QuoteRequest {
  string symbol = 1;
}

message StreamQuotesRequest {
  repeated string symbols = 1;
  int32 interval_ms = 2;
}

message Quote {
  string symbol = 1;
  double price = 2;
  double change = 3;
  double change_percent = 4;
  int64 volume = 5;
  string timestamp = 6;
  double bid = 7;
  double ask = 8;
  double high = 9;
  double low = 10;
  double open = 11;
  double prev_close = 12;
}

message TradeRequest {
  string order_type = 1;  // "buy" or "sell"
  string symbol = 2;
  int32 quantity = 3;
  double limit_price = 4;  // 0 for market orders
  string time_in_force = 5;  // "day", "gtc", "ioc"
}

message TradeResponse {
  string trade_id = 1;
  string status = 2;  // "pending", "filled", "partial", "cancelled"
  string symbol = 3;
  int32 filled_quantity = 4;
  double avg_price = 5;
  string timestamp = 6;
  string message = 7;
}
